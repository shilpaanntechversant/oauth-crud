{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapGetters } from 'vuex';\nimport HeaderComponent from '@/components/HeaderComponent.vue';\nexport default {\n  name: 'PostUpdate',\n  components: {\n    HeaderComponent\n  },\n  data() {\n    return {\n      headingValue: \"Update Post\",\n      postId: this.$route.params.postId,\n      post: {},\n      title: '',\n      description: '',\n      image: '',\n      successMessage: '',\n      message: '',\n      getTagList: [],\n      tagList: [],\n      selectetagList: []\n    };\n  },\n  mounted() {\n    this.isLoading = true;\n    this.tagListAction().then(response => {\n      if (response.status === 200) {\n        this.getTagList = response.data.results;\n        this.isLoading = false;\n      }\n    });\n    this.isLoading = true;\n    this.postDetailsAction(this.postId).then(response => {\n      if (response.status === 200) {\n        this.post = response.data.results;\n        this.selectetagList = response.data.results.tag;\n        let ids = new Set(this.selectetagList.map(({\n          id\n        }) => id));\n        console.log(ids);\n        this.tagList = this.getTagList.filter(({\n          id\n        }) => !ids.has(id));\n        console.log(this.tagList);\n        this.isLoading = false;\n      }\n    });\n  },\n  methods: {\n    ...mapActions({\n      postUpdateAction: 'postUpdate',\n      postDetailsAction: 'postDetails',\n      tagListAction: 'tagFullList'\n    }),\n    postUpdate() {\n      try {\n        const postData = {\n          id: this.postId,\n          title: this.post.title,\n          description: this.post.description,\n          image: this.post.image,\n          tag: this.selectetagList.map(function (tag) {\n            return tag.id;\n          })\n        };\n        console.log(postData);\n        this.postUpdateAction(postData).then(response => {\n          this.errorMessage.results = [];\n          if (response.data.status.code === 200) {\n            window.scrollTo(0, 0);\n            this.successMessage = response.data.status.message;\n            setTimeout(() => {\n              this.successMessage = '';\n            }, 3000);\n            setTimeout(() => this.$router.push({\n              path: '/post/list'\n            }), 3000);\n            //return this.$router.push('/')\n          } else {\n            this.message = 'Some Error Occured. Can you please try again';\n            setTimeout(() => {\n              this.message = '';\n            }, 3000);\n\n            //return this.$router.push('/register')\n          }\n        });\n      } catch (error) {\n        console.log(error.response.data.results);\n        this.errorMessage = error.response.data.results;\n        // return this.$router.push('/register')\n      }\n    },\n\n    startDrag(evt, item) {\n      evt.dataTransfer.dropEffect = 'move';\n      evt.dataTransfer.effectAllowed = 'move';\n      evt.dataTransfer.setData('itemID', item.id);\n    },\n    onDrop(evt, list) {\n      const itemID = evt.dataTransfer.getData('itemID');\n      if (list == 'tagList') {\n        const tag = this.selectetagList.find(item => item.id == itemID);\n        let index = this.selectetagList.findIndex(item => item.id == itemID);\n        this.selectetagList.splice(index, 1);\n        this.tagList.push(tag);\n      } else {\n        const tag = this.tagList.find(item => item.id == itemID);\n        let index = this.tagList.findIndex(item => item.id == itemID);\n        this.tagList.splice(index, 1);\n        this.selectetagList.push(tag);\n      }\n    },\n    handleImage(e) {\n      console.log(this.image);\n      const selectedImage = e.target.files[0];\n      // this.createBase64Image(selectedImage);\n      const render = new FileReader();\n      render.onload = e => {\n        this.image = e.target.result;\n      };\n      render.readAsDataURL(selectedImage);\n      console.log(this.image);\n    }\n  },\n  computed: {\n    ...mapGetters({\n      successMessage: 'getPostSuccess',\n      errorMessage: 'getPostError',\n      postDetails: 'getpostDetails'\n    })\n  }\n};","map":{"version":3,"mappings":"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","names":["mapActions","mapGetters","HeaderComponent","name","components","data","headingValue","postId","$route","params","post","title","description","image","successMessage","message","getTagList","tagList","selectetagList","mounted","isLoading","tagListAction","then","response","status","results","postDetailsAction","tag","ids","Set","map","id","console","log","filter","has","methods","postUpdateAction","postUpdate","postData","errorMessage","code","window","scrollTo","setTimeout","$router","push","path","error","startDrag","evt","item","dataTransfer","dropEffect","effectAllowed","setData","onDrop","list","itemID","getData","find","index","findIndex","splice","handleImage","e","selectedImage","target","files","render","FileReader","onload","result","readAsDataURL","computed","postDetails"],"sourceRoot":"","sources":["/home/shilpa/Public/my-work/code/demo-authentication/authenticate-vue/src/views/PostUpdate.vue"],"sourcesContent":["<template>\n <HeaderComponent :heading=\"headingValue\" />\n\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n            <p v-if=\"successMessage\" class=\"h4 text-success \">{{successMessage}}</p>\n            <p v-if=\"message\" class=\"h4 text-primary \">{{message}}</p>\n\n      </div>\n\n    </div>\n  </div>\n  <div class=\"container\">\n    <form @submit.prevent=\"postUpdate\">\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n        \n          <div class=\"mb-2\">\n            <input v-model=\"post.title\" type=\"text\" class=\"form-control\" placeholder=\"Title\">\n            <p v-if=\"errorMessage.results && errorMessage.results.title\" class=\"h6 text-danger \">{{errorMessage.results.title[0]}}</p>\n          </div>\n          <div class=\"mb-2\">\n            \n            <textarea v-model=\"post.description\" class=\"form-control\" placeholder=\"Description\"></textarea>\n            <p v-if=\"errorMessage.results && errorMessage.results.description\" class=\"h6 text-danger \">{{errorMessage.results.description[0]}}</p>\n          </div>\n          <div class=\"mb-2\">\n              <input type=\"file\" accept=\"image/*\" class=\"form-control\" @change=\"handleImage\">\n              <p v-if=\"errorMessage.results && errorMessage.results.image\" class=\"h6 text-danger \">{{errorMessage.results.image[0]}}</p>\n            </div>\n        </div>  \n        <div class=\"col-md-4\" v-if=\"post.image\">\n          <img class=\"user-img-big\" :src=\"post.image\" >\n\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <div class=\"drop-zone\" \n            @drop=\"onDrop($event, 'tagList')\"\n            @dragover.prevent\n            @dragenter.prevent\n          >\n            <div\n              class=\"drag-el\"\n              v-for=\"item in tagList\"\n              :key=\"item.title\"\n              draggable=\"true\"\n              @dragstart=\"startDrag($event, item)\"\n            >\n              {{ item.title }}\n            </div>\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"drop-zone\" \n            @drop=\"onDrop($event, 'selectetagList')\"\n            @dragover.prevent\n            @dragenter.prevent\n          >\n            <div\n              class=\"drag-el\"\n              v-for=\"item in selectetagList\"\n              :key=\"item.title\"\n              draggable=\"true\"\n              @dragstart=\"startDrag($event, item)\"\n            >\n              {{ item.title }}\n            </div>\n\n          </div>\n        </div>\n        <div class=\"mb-2\">\n          <input type=\"submit\" class=\"btn btn-success\" value=\"Update\">\n        </div>\n      </div>\n    </form>\n      \n      \n    \n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport HeaderComponent from  '@/components/HeaderComponent.vue'\n\nexport default {\n    name:'PostUpdate',\n    components:{\n      HeaderComponent\n    },\n    data(){\n        return{\n            headingValue : \"Update Post\",\n            postId: this.$route.params.postId,\n            post:{},\n            title:'',\n            description:'',\n            image:'',\n            successMessage:'',\n            message:'',\n            getTagList:[],\n            tagList:[],\n            selectetagList:[], \n            \n            \n        }\n    },\n    mounted(){\n        this.isLoading = true;\n        this.tagListAction().then((response) => {\n          if (response.status === 200) {\n            this.getTagList = response.data.results;\n            this.isLoading = false;\n          }\n        });\n        this.isLoading = true;\n        this.postDetailsAction(this.postId).then((response) => {\n        if (response.status === 200) {\n          this.post = response.data.results;\n          this.selectetagList = response.data.results.tag\n          let ids = new Set(this.selectetagList.map(({ id }) => id));\n          console.log(ids)\n          this.tagList = this.getTagList.filter(({ id }) => !ids.has(id));\n          console.log(this.tagList)\n          this.isLoading = false;\n        }\n      });\n      \n\n    },\n    methods:{\n      ...mapActions({\n        postUpdateAction: 'postUpdate',\n        postDetailsAction: 'postDetails',\n        tagListAction: 'tagFullList',\n      }),\n      postUpdate(){\n          try{\n            const postData = {\n              id: this.postId,\n              title: this.post.title,\n              description: this.post.description,\n              image: this.post.image,\n              tag: this.selectetagList.map(function (tag) { return tag.id; })\n            };\n            console.log(postData)\n            this.postUpdateAction(postData).then((response) => {\n              this.errorMessage.results=[]\n              if (response.data.status.code === 200){\n                window.scrollTo(0, 0);\n                this.successMessage =response.data.status.message\n                setTimeout(() => {\n                  this.successMessage = '';\n                }, 3000);\n                setTimeout( () => this.$router.push({ path: '/post/list'}), 3000);\n                //return this.$router.push('/')\n              }else{\n                this.message ='Some Error Occured. Can you please try again'\n                setTimeout(() => {\n                  this.message = '';\n                }, 3000);\n\n                //return this.$router.push('/register')\n\n              }\n            });\n          }\n        catch(error){\n          console.log(error.response.data.results)\n          this.errorMessage=error.response.data.results\n          // return this.$router.push('/register')\n        }\n      },\n      startDrag(evt, item) {\n        evt.dataTransfer.dropEffect = 'move'\n        evt.dataTransfer.effectAllowed = 'move'\n        evt.dataTransfer.setData('itemID', item.id)\n      },\n      onDrop(evt, list) {\n        const itemID = evt.dataTransfer.getData('itemID')\n        if(list == 'tagList'){\n          const tag =  this.selectetagList.find((item) => item.id == itemID)\n          let index = this.selectetagList.findIndex(item => item.id  == itemID)\n          this.selectetagList.splice(index, 1)\n          this.tagList.push(tag)\n        }else{\n         const tag =  this.tagList.find((item) => item.id == itemID)\n         let index = this.tagList.findIndex(item => item.id  == itemID)\n         this.tagList.splice(index, 1)\n         this.selectetagList.push(tag)\n\n\n        }\n      },\n      handleImage(e){\n                console.log(this.image)\n\n        const selectedImage = e.target.files[0];\n        // this.createBase64Image(selectedImage);\n        const render = new FileReader();\n        render.onload = (e) =>{\n          this.image = e.target.result;\n        }\n        render.readAsDataURL(selectedImage)\n                console.log(this.image)\n      },\n    },\n    computed: {\n    ...mapGetters({\n        successMessage: 'getPostSuccess',\n        errorMessage: 'getPostError',\n        postDetails: 'getpostDetails',\n\n      }),\n    }\n}\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}